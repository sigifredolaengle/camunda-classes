# Consultar Stock 1

![BPMN Diagram](process.png)

|   Nr. | Tópico                            | Actividad                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| :---: | :---                              | :---                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|     1 | **StartEvent**                    | 1. En la pestaña 'General', configura el parámetro **Initiator** = 'starter'                                                                                                                                                                                                                                                                                                                                                                                                                |
|     2 | **'Ingresar código de producto' User Task** | .1 En la pestaña 'General', configura el parámetro **Assignee** = '${starter}'.<br>2. En la pestaña 'Forms' agrega una variable del siguiente modo:<br>2a. **ID** = 'codigo', **Type** = 'string', **Label** = 'Código del producto'.                                                                                                                                                                                                                              |
|     3 | **'Mostrar stock' User Task** | 1. En la pestaña 'General', configura el parámetro **Assignee** = '${starter}'.<br>2. En la pestaña 'Forms', agrega las siguientes variables del siguiente modo:<br>2a. **ID** = 'codigo', **Type** = 'string', **Label** = 'Código del producto', **Add Constraint** -> **Name** = 'readonly'.<br>2b. **ID** = 'nombre, **Type** = 'string', **Label** = 'Nombre del producto', **Add Constraint** -> **Name** = 'readonly'.<br>2c. **ID** = 'stock', **Type** = 'long', **Label** = 'Stock del producto', **Add Constraint** -> **Name** = 'readonly'.<br>                                                                                                                                                                      |
|     4 | **'Consultar stock producto' Service Task** | 1. Configura el parámetro 'Implementation' = 'Connector'. <br> 2. Muévete a la pestaña **Connector**. Configura el parámetro **Connector Id** = 'http-connector'.<br> 3. Agrega los siguientes **Input Parameter**:<br> 3a. **Name** = 'method'. **Type** = 'Text'. **Value** = 'GET'. <br> 3b. **Name** = 'url'. **Type** = 'Script'. **Script Format** = 'freemarker'. **Script Type** = 'Inline Script'. **Script Format** = 'http://localhost:8000/stock/${codigo}'. 4. Agrega los siguientes **Output Parameter**:<br> 4a. **Name** = 'nombre'. **Type** = 'Text'. **Value** = 'S(response).prop('nombre').value()'. <br> 3b. **Name** = 'stock'. **Type** = 'Script'. **Script Format** = 'javascript'. **Script Type** = 'Inline Script'. **Script Format** = 'Number(S(response).prop('stock').value())'.                                                                                                                                                                                                |
