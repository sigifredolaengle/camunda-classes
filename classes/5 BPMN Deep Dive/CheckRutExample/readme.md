# Check Rut Example

![BPMN Diagram](process.png)

|   Nr. | Topic                                       | Activity                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 
| :---: | :---                                        | :---                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|     1 | **'Pedir rut y nombre' User Task**          | Add a form with a 'name' field of type 'string' and a 'rut' field of type 'string'.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|     2 | **'Confirmar nombre' User Task**            | Add a form with a 'name' field of type 'string', a 'retrievedName' field of type 'string' and a 'match' field of type 'boolean'.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|     3 | **'Obtener nombre seg√∫n rut' Service Task** | 1. Set the field 'Implementation' = 'Connector'. <br> 2. In the **Connector** tab: <br> 2a. Set the **Connector Id** = 'http-connector'.<br> 2b. Add the following **Input Parameters**:<br> 2ba. **Name** = 'method'. **Type** = 'Text'. **Value** = 'GET'. <br> 2bb. **Name** = 'url'. **Type** = 'Script'. **Script Format** = 'freemarker'. **Script Type** = 'Inline Script'. **Script** = 'https://api.rutify.cl/rut/${rut}'.<br> 2c. Add the following **Output Parameters**: <br> 2ca. **Name** = 'retrievedName'. **Type** = 'Script'. **Script Format** = 'javaScript'. **Script Type** = 'Inline Script'. **Script** = 'S(response).prop("nombre").value().toString()' |
|     4 | **'Corresponde? Si' Sequence Flow**         | Set the field 'Condition Type' = 'Expression' and 'Expression' = '#{match}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|     5 | **'Corresponde? No' Sequence Flow**         | Using the tool icon change its type to a 'Default Flow'.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|     6 | **Error Termination Event**                 | Create a new Error with **Error Name** = 'Nombre no corresponde' and **Error Code** = 'Nombre no corresponde'.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|     7 | **Error Intermediate Event**                | Select the 'Nombre no corresponde' error from the dropdown.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
